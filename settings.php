<?php
/*******************************************************************************
 * SETTINGS FILE
 *******************************************************************************
 * Contains sitewide variables and required directories
 ******************************************************************************/

/*******************************************************************************
 * REQUIRED DIRECTORIES
 ******************************************************************************/
define("CORE", 'core/');
define("ASSETS", 'assets/');
define("THEMES", 'themes/');
define("DEFAULT_THEME", 'default');
define("REQUIRED", 'required/');
define("DATE_FORMAT", 'Y-m-d H:i:s');

/*******************************************************************************
 * AUTOLOAD CLASSES AS THEY ARE REQUIRED
 ******************************************************************************/
function __autoload($class_name){include CORE . 'classes/' . $class_name .'.php';}

/*******************************************************************************
 * REQUIRED DEFINITIONS
 ******************************************************************************/
define("DB_DSN", 'mysql:host=' . DB_HOST . ';dbname=' . DB_NAME);

/*******************************************************************************
 * REQUIRED FILES
 ******************************************************************************/
require(REQUIRED . 'version.php');
require(REQUIRED . 'functions.php');
require(REQUIRED . 'init.php');

/*******************************************************************************
 * CHECK FOR REQUIRED SOFTWARE
 ******************************************************************************/
check_php_version();
check_mysql_installed();

/*******************************************************************************
 * UNREGISTER GLOBALS AND REMOVE MAGIC QUOTES
 ******************************************************************************/
unregister_globals();
remove_magic_quotes();

/*******************************************************************************
 * DEFINE COOKIES
 ******************************************************************************/
define_cookies();

/*******************************************************************************
 * INSANTIATE CLASSES
 ******************************************************************************/
$db = new Database();

/*******************************************************************************
 * REQUIRE DATABSE BUILDER
 ******************************************************************************/
require(REQUIRED . 'db-builder.php');

/*******************************************************************************
 * BUILD DATABASE
 ******************************************************************************/
build_database();